# Easy Facture License Server - Configuration
# Copiez ce fichier vers .env et remplissez les valeurs

# ==============================================
# DATABASE (PostgreSQL)
# ==============================================
POSTGRES_USER=licenseuser
POSTGRES_PASSWORD=CHANGEME_STRONG_PASSWORD_HERE
POSTGRES_DB=easyfacture_licenses

# URL complète (générée automatiquement dans docker-compose)
# DATABASE_URL=postgresql://licenseuser:password@postgres:5432/easyfacture_licenses

# ==============================================
# SECURITY / CRYPTOGRAPHY
# ==============================================
# Clé secrète pour JWT et sessions (générer avec: openssl rand -hex 32)
SECRET_KEY=CHANGEME_GENERATE_RANDOM_KEY_HERE

# Clé de chiffrement des licences (DOIT être identique à EasyFacture client)
# IMPORTANT: Cette clé est QvS9Dy6SjhpVPFf-nsu2NZ-xPfS3-Xaom--vwvdeH6w=
LICENSE_SECRET_KEY=QvS9Dy6SjhpVPFf-nsu2NZ-xPfS3-Xaom--vwvdeH6w=

# ==============================================
# API CONFIGURATION
# ==============================================
API_PORT=8000
ENVIRONMENT=production
LOG_LEVEL=INFO

# ==============================================
# CORS (Cross-Origin Resource Sharing)
# ==============================================
# Autoriser tous les domaines (* recommandé pour trial public)
# En production stricte: https://easyfacture.mondher.ch,https://app.mondher.ch
CORS_ORIGINS=*

# ==============================================
# RATE LIMITING (Anti-abus)
# ==============================================
# Limite pour les licences trial (éviter spam)
TRIAL_RATE_LIMIT=3/hour

# Limite pour validation (permet usage normal)
VALIDATE_RATE_LIMIT=100/hour

# ==============================================
# TRIAL CONFIGURATION
# ==============================================
# Durée par défaut des licences trial (en jours)
DEFAULT_TRIAL_DAYS=30

# ==============================================
# ADMIN ACCESS
# ==============================================
ADMIN_EMAIL=admin@mondher.ch
ADMIN_PASSWORD=CHANGEME_ADMIN_PASSWORD

# ==============================================
# EMAIL (Optionnel - pour notifications)
# ==============================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@mondher.ch

# ==============================================
# STRIPE PAYMENT (Licences Lifetime)
# ==============================================
# Clés API Stripe (récupérer depuis dashboard.stripe.com)
STRIPE_SECRET_KEY=sk_test_XXXXXX  # sk_live_XXXXXX en production
STRIPE_PUBLISHABLE_KEY=pk_test_XXXXXX  # pk_live_XXXXXX en production

# Webhook secret (configurer le webhook dans Stripe Dashboard)
STRIPE_WEBHOOK_SECRET=whsec_XXXXXX

# Price IDs pour chaque devise (créer les prix dans Stripe Dashboard)
STRIPE_PRICE_EUR=price_XXXXXX_EUR  # Prix 199€
STRIPE_PRICE_USD=price_XXXXXX_USD  # Prix 219$
STRIPE_PRICE_CHF=price_XXXXXX_CHF  # Prix 199 CHF
STRIPE_PRICE_GBP=price_XXXXXX_GBP  # Prix 179£

# URLs de redirection après paiement
STRIPE_SUCCESS_URL=https://easyfacture.mondher.ch/payment/success?session_id={CHECKOUT_SESSION_ID}
STRIPE_CANCEL_URL=https://easyfacture.mondher.ch/payment/cancel
